{"ast":null,"code":"var _jsxFileName = \"/Users/pinghunghuang/Desktop/boardapp/src/components/App/App/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ENDPOINT = 'https://student-json-api.lidemy.me/comments';\nconst Page = styled.div`\n  width: 300px;\n  margin: 0 auto;\n\n`;\n_c = Page;\nconst Title = styled.h1`\n   color: #333;\n`;\n_c2 = Title;\nconst MessageForm = styled.form`\n   margin-top: 16px;\n`;\n_c3 = MessageForm;\nconst MessageTextArea = styled.textarea`\n     border: 1px solid black;\n     width: 100%;\n     height: 30vh;\n`;\n_c4 = MessageTextArea;\nconst SubmitButton = styled.button`\n   margin-top: 8px;\n`;\n_c5 = SubmitButton;\nconst MessageList = styled.div`\n   margin-top: 16px;\n`;\n_c6 = MessageList;\nconst MessageContainer = styled.div`\n      border: 1px solid black;\n      padding: 5px;\n      border-radius: 5px;\n      &+&{\n          margin-top: 8px;\n      }\n`;\n_c7 = MessageContainer;\nconst MessageHead = styled.div`\n     display: flex;\n     align-items: center;\n     justify-content: space-between;\n     border-bottom: 1px solid rgba(0,0,0,.3);\n     padding-bottom: 5px;\n`;\n_c8 = MessageHead;\nconst MessageAuthor = styled.div`\n      color: rgba(23,78,55,0.3);\n`;\n_c9 = MessageAuthor;\nconst MessageTime = styled.div`\n\n`;\n_c10 = MessageTime;\nconst MessageBody = styled.div`\n     margin-top: 16px;\n     font-size: 16px;\n`;\n_c11 = MessageBody;\nconst ErrorMessage = styled.div`\n     color:pink;\n     font-size: 14px;\n`;\n_c12 = ErrorMessage;\n\nfunction Message({\n  author,\n  time,\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(MessageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(MessageHead, {\n      children: [/*#__PURE__*/_jsxDEV(MessageAuthor, {\n        children: author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MessageTime, {\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MessageBody, {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n\n_c13 = Message;\n\nconst App = () => {\n  _s();\n\n  const [messages, setMessages] = useState([]);\n  const [apiError, setApiError] = useState(null);\n  const [value, setValue] = useState('');\n  const [postMessageError, setPostMessageError] = useState();\n\n  const fetchMessages = () => {\n    return fetch(API_ENDPOINT).then(res => res.json()).then(data => {\n      setMessages(data);\n    }).catch(err => {\n      setApiError(err.Message);\n    });\n  };\n\n  useEffect(() => {\n    fetchMessages();\n  }, []);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  const handleFormSubmit = e => {\n    e.preventDefault();\n    fetch('https://student-json-api.lidemy.me/comments', {\n      method: 'POST',\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        nickname: 'albert',\n        body: value\n      })\n    }).then(res => res.json()).then(data => {\n      if (!data.ok) {\n        setPostMessageError(data.Message);\n        return;\n      }\n\n      fetchMessages();\n    });\n  };\n\n  useEffect(() => {\n    fetchMessages();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"\\u7559\\u8A00\\u677F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(MessageForm, {\n      onSubmit: handleFormSubmit,\n      children: [/*#__PURE__*/_jsxDEV(MessageTextArea, {\n        value: value,\n        onChange: handleChange,\n        rows: 10\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        children: \"\\u9001\\u51FA\\u7559\\u8A00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 16\n      }, this), postMessageError && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: postMessageError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 12\n    }, this), apiError && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      children: [\"Something went wrong. \", apiError.toString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(MessageList, {\n      children: messages.map(function (item) {\n        return /*#__PURE__*/_jsxDEV(Message, {\n          author: item.nickname,\n          time: item.createdAt,\n          children: item.body\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 9\n  }, this);\n};\n\n_s(App, \"5h6KMkhXD+5uweGVw9adcOiPxcg=\");\n\n_c14 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14;\n\n$RefreshReg$(_c, \"Page\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"MessageForm\");\n$RefreshReg$(_c4, \"MessageTextArea\");\n$RefreshReg$(_c5, \"SubmitButton\");\n$RefreshReg$(_c6, \"MessageList\");\n$RefreshReg$(_c7, \"MessageContainer\");\n$RefreshReg$(_c8, \"MessageHead\");\n$RefreshReg$(_c9, \"MessageAuthor\");\n$RefreshReg$(_c10, \"MessageTime\");\n$RefreshReg$(_c11, \"MessageBody\");\n$RefreshReg$(_c12, \"ErrorMessage\");\n$RefreshReg$(_c13, \"Message\");\n$RefreshReg$(_c14, \"App\");","map":{"version":3,"sources":["/Users/pinghunghuang/Desktop/boardapp/src/components/App/App/App.js"],"names":["React","useState","useEffect","styled","API_ENDPOINT","Page","div","Title","h1","MessageForm","form","MessageTextArea","textarea","SubmitButton","button","MessageList","MessageContainer","MessageHead","MessageAuthor","MessageTime","MessageBody","ErrorMessage","Message","author","time","children","App","messages","setMessages","apiError","setApiError","value","setValue","postMessageError","setPostMessageError","fetchMessages","fetch","then","res","json","data","catch","err","handleChange","e","target","handleFormSubmit","preventDefault","method","headers","body","JSON","stringify","nickname","ok","toString","map","item","createdAt","id"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from 'react';\nimport styled from 'styled-components';\n\nconst API_ENDPOINT = 'https://student-json-api.lidemy.me/comments'\n\nconst Page = styled.div`\n  width: 300px;\n  margin: 0 auto;\n\n`\nconst Title =styled.h1`\n   color: #333;\n`\nconst MessageForm = styled.form`\n   margin-top: 16px;\n`\nconst MessageTextArea = styled.textarea`\n     border: 1px solid black;\n     width: 100%;\n     height: 30vh;\n`\nconst SubmitButton = styled.button`\n   margin-top: 8px;\n`\nconst MessageList = styled.div`\n   margin-top: 16px;\n`\n\nconst MessageContainer =styled.div`\n      border: 1px solid black;\n      padding: 5px;\n      border-radius: 5px;\n      &+&{\n          margin-top: 8px;\n      }\n`\nconst MessageHead =styled.div`\n     display: flex;\n     align-items: center;\n     justify-content: space-between;\n     border-bottom: 1px solid rgba(0,0,0,.3);\n     padding-bottom: 5px;\n`\nconst MessageAuthor =styled.div`\n      color: rgba(23,78,55,0.3);\n`\nconst MessageTime =styled.div`\n\n`\nconst MessageBody =styled.div`\n     margin-top: 16px;\n     font-size: 16px;\n`\nconst ErrorMessage = styled.div `\n     color:pink;\n     font-size: 14px;\n`\n\n\nfunction Message({author,time,children}){\n    return(\n        <MessageContainer>\n            <MessageHead>\n                <MessageAuthor>{author}</MessageAuthor>\n                <MessageTime>{time}</MessageTime>\n            </MessageHead>\n            <MessageBody>{children}</MessageBody>\n        </MessageContainer>\n    )\n}\n\n\nconst App = () => {\n    const [messages,setMessages]=useState([]);\n    const [apiError,setApiError]=useState(null);\n    const [value,setValue]=useState('');\n    const [postMessageError,setPostMessageError] = useState();\n\n    const fetchMessages = ()=>{\n        return fetch(API_ENDPOINT)\n        .then(res =>res.json())\n        .then(data =>{\n           setMessages(data)\n        })\n        .catch(err =>{\n           setApiError(err.Message)\n        })\n    }\n  \n    useEffect(()=>{\n        fetchMessages()\n    },[])\n\n    const handleChange =(e)=>{\n        setValue(e.target.value)\n    }\n    const handleFormSubmit =(e)=>{\n         e.preventDefault();\n         fetch('https://student-json-api.lidemy.me/comments',{\n            method:'POST',\n            headers:{\n                \"content-type\":\"application/json\",\n            },\n            body:JSON.stringify({\n                nickname:'albert',\n                body:value,\n            })\n        })\n        .then((res)=>res.json())\n        .then((data)=>{\n            if(!data.ok){\n                setPostMessageError(data.Message);\n                return\n            }\n             fetchMessages()\n        });       \n    }\n    useEffect(()=>{\n        fetchMessages()\n    },[])\n\n    return (\n        <Page>\n           <Title>留言板</Title>\n           <MessageForm onSubmit={handleFormSubmit} >\n               <MessageTextArea value={value} onChange={handleChange} rows={10} />\n               <SubmitButton>送出留言</SubmitButton>\n               {postMessageError && <ErrorMessage>{postMessageError}</ErrorMessage> }\n           </MessageForm>\n           {apiError && (\n               <ErrorMessage>\n                   Something went wrong. {apiError.toString()}\n               </ErrorMessage>\n           )}\n           <MessageList>\n                {\n                    messages.map(function(item){\n                          return (\n                            <Message key={item.id} author={item.nickname} time={item.createdAt} >\n                             {item.body}\n                            </Message>\n                          )\n                    })\n                }              \n           </MessageList>\n        </Page>\n    )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}