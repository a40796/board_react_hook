{"ast":null,"code":"var _jsxFileName = \"/Users/pinghunghuang/Desktop/boardapp/src/components/App/App/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ENDPOINT = 'https://student-json-api.lidemy.me/comments';\nconst Page = styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  font-family: \"monospace\", \"微軟正黑體\";\n  box-shadow: 0px 0px 16px rgb(199, 197, 197);\n  border-radius: 8px;\n  padding: 12px 28px;\n  color: #6c6c6c;\n  box-sizing: border-box;\n\n`;\n_c = Page;\nconst Title = styled.h1`\n  text-align: center;\n   color: #333;\n`;\n_c2 = Title;\nconst MessageForm = styled.form`\n   margin-top: 16px;\n`;\n_c3 = MessageForm;\nconst MessageTextArea = styled.textarea`\n     border: 1px solid black;\n     width: 100%;\n     height: 30vh;\n`;\n_c4 = MessageTextArea;\nconst SubmitButton = styled.button`\n   margin-top: 8px;\n  color: #ddd;\n  background-color: #343a40;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  font-size: 16px;\n  padding: 6px 12px;\n`;\n_c5 = SubmitButton;\nconst MessageList = styled.div`\n   margin-top: 16px;\n`;\n_c6 = MessageList;\nconst MessageContainer = styled.div`\n      border: 1px solid black;\n      padding: 5px;\n      border-radius: 5px;\n      &+&{\n          margin-top: 8px;\n      }\n`;\n_c7 = MessageContainer;\nconst MessageHead = styled.div`\n     display: flex;\n     align-items: center;\n     justify-content: space-between;\n     border-bottom: 1px solid rgba(0,0,0,.3);\n     padding-bottom: 5px;\n`;\n_c8 = MessageHead;\nconst MessageAuthor = styled.div`\n      color: rgba(23,78,55,0.3);\n`;\n_c9 = MessageAuthor;\nconst MessageTime = styled.div`\n\n`;\n_c10 = MessageTime;\nconst MessageDeleteBtn = styled.button`\n\n`;\n_c11 = MessageDeleteBtn;\nconst MessageBody = styled.div`\n     margin-top: 16px;\n     font-size: 16px;\n`;\n_c12 = MessageBody;\nconst ErrorMessage = styled.div`\n     margin-top: 16px;\n     color: #db4c3f;\n`;\n_c13 = ErrorMessage;\n\nfunction Message({\n  author,\n  time,\n  children,\n  handleDeleteMessage\n}) {\n  return /*#__PURE__*/_jsxDEV(MessageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(MessageHead, {\n      children: [/*#__PURE__*/_jsxDEV(MessageAuthor, {\n        children: author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MessageTime, {\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MessageDeleteBtn, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MessageBody, {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_c14 = Message;\n\nconst App = () => {\n  _s();\n\n  const [messages, setMessages] = useState([]);\n  const [apiError, setApiError] = useState(null);\n  const [value, setValue] = useState('');\n  const [postMessageError, setPostMessageError] = useState();\n  const [isRequestPosstMsg, setIsRequestPosstMsg] = useState(false);\n\n  const fetchMessages = () => {\n    fetch(API_ENDPOINT).then(res => res.json()).then(data => {\n      setMessages(data);\n    }).catch(err => {\n      setApiError(err.Message);\n    });\n  };\n\n  useEffect(() => {\n    fetchMessages();\n  }, []);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  const handleFormSubmit = e => {\n    e.preventDefault();\n    fetch('https://student-json-api.lidemy.me/comments', {\n      method: 'POST',\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        nickname: 'albert',\n        body: value\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.ok === 0) {\n        setPostMessageError(data.Message);\n        return;\n      }\n\n      fetchMessages();\n    });\n  };\n\n  useEffect(() => {\n    fetchMessages();\n  }, []);\n\n  const handleTextareaFocus = () => {\n    setPostMessageError(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"\\u7559\\u8A00\\u677F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(MessageForm, {\n      onSubmit: handleFormSubmit,\n      children: [/*#__PURE__*/_jsxDEV(MessageTextArea, {\n        value: value,\n        onFocus: handleTextareaFocus,\n        onChange: handleChange,\n        rows: 10\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        children: \"\\u9001\\u51FA\\u7559\\u8A00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 16\n      }, this), postMessageError && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: postMessageError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 12\n    }, this), apiError && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      children: [\"Something went wrong. \", apiError.toString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(MessageList, {\n      children: messages.map(function (item) {\n        return /*#__PURE__*/_jsxDEV(Message, {\n          author: item.nickname,\n          time: item.createdAt,\n          handleDeleteMessage: handleDeleteMessage,\n          children: item.body\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 9\n  }, this);\n};\n\n_s(App, \"nGIS/lsjbyhoZDJ+phP5OqM3Cio=\");\n\n_c15 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15;\n\n$RefreshReg$(_c, \"Page\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"MessageForm\");\n$RefreshReg$(_c4, \"MessageTextArea\");\n$RefreshReg$(_c5, \"SubmitButton\");\n$RefreshReg$(_c6, \"MessageList\");\n$RefreshReg$(_c7, \"MessageContainer\");\n$RefreshReg$(_c8, \"MessageHead\");\n$RefreshReg$(_c9, \"MessageAuthor\");\n$RefreshReg$(_c10, \"MessageTime\");\n$RefreshReg$(_c11, \"MessageDeleteBtn\");\n$RefreshReg$(_c12, \"MessageBody\");\n$RefreshReg$(_c13, \"ErrorMessage\");\n$RefreshReg$(_c14, \"Message\");\n$RefreshReg$(_c15, \"App\");","map":{"version":3,"sources":["/Users/pinghunghuang/Desktop/boardapp/src/components/App/App/App.js"],"names":["React","useState","useEffect","styled","API_ENDPOINT","Page","div","Title","h1","MessageForm","form","MessageTextArea","textarea","SubmitButton","button","MessageList","MessageContainer","MessageHead","MessageAuthor","MessageTime","MessageDeleteBtn","MessageBody","ErrorMessage","Message","author","time","children","handleDeleteMessage","App","messages","setMessages","apiError","setApiError","value","setValue","postMessageError","setPostMessageError","isRequestPosstMsg","setIsRequestPosstMsg","fetchMessages","fetch","then","res","json","data","catch","err","handleChange","e","target","handleFormSubmit","preventDefault","method","headers","body","JSON","stringify","nickname","ok","handleTextareaFocus","toString","map","item","createdAt","id"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from 'react';\nimport styled from 'styled-components';\n\nconst API_ENDPOINT = 'https://student-json-api.lidemy.me/comments'\n\nconst Page = styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  font-family: \"monospace\", \"微軟正黑體\";\n  box-shadow: 0px 0px 16px rgb(199, 197, 197);\n  border-radius: 8px;\n  padding: 12px 28px;\n  color: #6c6c6c;\n  box-sizing: border-box;\n\n`\nconst Title =styled.h1`\n  text-align: center;\n   color: #333;\n`\nconst MessageForm = styled.form`\n   margin-top: 16px;\n`\nconst MessageTextArea = styled.textarea`\n     border: 1px solid black;\n     width: 100%;\n     height: 30vh;\n`\nconst SubmitButton = styled.button`\n   margin-top: 8px;\n  color: #ddd;\n  background-color: #343a40;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  font-size: 16px;\n  padding: 6px 12px;\n`\nconst MessageList = styled.div`\n   margin-top: 16px;\n`\n\nconst MessageContainer =styled.div`\n      border: 1px solid black;\n      padding: 5px;\n      border-radius: 5px;\n      &+&{\n          margin-top: 8px;\n      }\n`\nconst MessageHead =styled.div`\n     display: flex;\n     align-items: center;\n     justify-content: space-between;\n     border-bottom: 1px solid rgba(0,0,0,.3);\n     padding-bottom: 5px;\n`\nconst MessageAuthor =styled.div`\n      color: rgba(23,78,55,0.3);\n`\nconst MessageTime =styled.div`\n\n`\nconst MessageDeleteBtn=styled.button`\n\n`\nconst MessageBody =styled.div`\n     margin-top: 16px;\n     font-size: 16px;\n`\nconst ErrorMessage = styled.div `\n     margin-top: 16px;\n     color: #db4c3f;\n`\n\n\nfunction Message({author,time,children,handleDeleteMessage}){\n    return(\n        <MessageContainer>\n            <MessageHead>\n                <MessageAuthor>{author}</MessageAuthor>\n                <MessageTime>{time}</MessageTime>\n                <MessageDeleteBtn></MessageDeleteBtn>\n            </MessageHead>\n            <MessageBody>{children}</MessageBody>\n        </MessageContainer>\n    )\n}\n\n\nconst App = () => {\n    const [messages,setMessages]=useState([]);\n    const [apiError,setApiError]=useState(null);\n    const [value,setValue]=useState('');\n    const [postMessageError,setPostMessageError] = useState();\n    const [isRequestPosstMsg,setIsRequestPosstMsg] = useState(false);\n\n    const fetchMessages = ()=>{\n        fetch(API_ENDPOINT)\n        .then((res) =>res.json())\n        .then((data) =>{\n           setMessages(data)\n        })\n        .catch((err) =>{\n           setApiError(err.Message)\n        })\n    }\n  \n    useEffect(()=>{\n        fetchMessages()\n    },[])\n\n    const handleChange =(e)=>{\n        setValue(e.target.value)\n    }\n    const handleFormSubmit =(e)=>{\n         e.preventDefault();\n         fetch('https://student-json-api.lidemy.me/comments',{\n            method:'POST',\n            headers:{\n                \"content-type\":\"application/json\",\n            },\n            body:JSON.stringify({\n                nickname:'albert',\n                body:value,\n            })\n        })\n        .then((res)=>res.json())\n        .then((data)=>{\n            if(data.ok === 0){\n                setPostMessageError(data.Message);\n                return\n            }\n             fetchMessages()\n        });       \n    }\n    useEffect(()=>{\n        fetchMessages()\n    },[])\n\n    const handleTextareaFocus =()=>{\n        setPostMessageError(null)\n    }\n\n    return (\n        <Page>\n           <Title>留言板</Title>\n           <MessageForm onSubmit={handleFormSubmit} >\n               <MessageTextArea value={value} onFocus={handleTextareaFocus} onChange={handleChange} rows={10} />\n               <SubmitButton>送出留言</SubmitButton>\n               {postMessageError && <ErrorMessage>{postMessageError}</ErrorMessage> }\n           </MessageForm>\n           {apiError && (\n               <ErrorMessage>\n                   Something went wrong. {apiError.toString()}\n               </ErrorMessage>\n           )}\n           <MessageList>\n                {\n                    messages.map(function(item){\n                          return (\n                            <Message key={item.id} author={item.nickname} time={item.createdAt} handleDeleteMessage={handleDeleteMessage} >\n                             {item.body}\n                            </Message>\n                          )\n                    })\n                }              \n           </MessageList>\n        </Page>\n    )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}